var Ln=Object.create;var zt=Object.defineProperty;var Dn=Object.getOwnPropertyDescriptor;var xn=Object.getOwnPropertyNames;var Nn=Object.getPrototypeOf,On=Object.prototype.hasOwnProperty;var Cn=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var vn=(s,t,o,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of xn(t))!On.call(s,f)&&f!==o&&zt(s,f,{get:()=>t[f],enumerable:!(p=Dn(t,f))||p.enumerable});return s};var In=(s,t,o)=>(o=s!=null?Ln(Nn(s)):{},vn(t||!s||!s.__esModule?zt(o,"default",{value:s,enumerable:!0}):o,s));var Gt=Cn((Ke,Ze)=>{(function(s,t){typeof Ke=="object"&&typeof Ze<"u"?Ze.exports=t():typeof define=="function"&&define.amd?define(t):(s=typeof globalThis<"u"?globalThis:s||self,s.DOMPurify=t())})(Ke,function(){"use strict";let{entries:s,setPrototypeOf:t,isFrozen:o,getPrototypeOf:p,getOwnPropertyDescriptor:f}=Object,{freeze:l,seal:u,create:m}=Object,{apply:A,construct:v}=typeof Reflect<"u"&&Reflect;l||(l=function(a){return a}),u||(u=function(a){return a}),A||(A=function(a,g,d){return a.apply(g,d)}),v||(v=function(a,g){return new a(...g)});let y=_(Array.prototype.forEach),w=_(Array.prototype.pop),E=_(Array.prototype.push),R=_(String.prototype.toLowerCase),z=_(String.prototype.toString),ee=_(String.prototype.match),B=_(String.prototype.replace),fe=_(String.prototype.indexOf),te=_(String.prototype.trim),b=_(RegExp.prototype.test),F=V(TypeError);function _(h){return function(a){for(var g=arguments.length,d=new Array(g>1?g-1:0),M=1;M<g;M++)d[M-1]=arguments[M];return A(h,a,d)}}function V(h){return function(){for(var a=arguments.length,g=new Array(a),d=0;d<a;d++)g[d]=arguments[d];return v(h,g)}}function c(h,a){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R;t&&t(h,null);let d=a.length;for(;d--;){let M=a[d];if(typeof M=="string"){let j=g(M);j!==M&&(o(a)||(a[d]=j),M=j)}h[M]=!0}return h}function G(h){let a=m(null);for(let[g,d]of s(h))f(h,g)!==void 0&&(a[g]=d);return a}function W(h,a){for(;h!==null;){let d=f(h,a);if(d){if(d.get)return _(d.get);if(typeof d.value=="function")return _(d.value)}h=p(h)}function g(d){return console.warn("fallback value for",d),null}return g}let pe=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ne=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_e=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),me=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),rt=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ae=l(["#text"]),at=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ce=l(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),lt=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ye=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xt=u(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qt=u(/<%[\w\W]*|[\w\W]*%>/gm),Vt=u(/\${[\w\W]*}/gm),Kt=u(/^data-[\-\w.\u00B7-\uFFFF]/),Zt=u(/^aria-[\-\w]+$/),ct=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qt=u(/^(?:\w+script|data):/i),Jt=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ft=u(/^html$/i);var pt=Object.freeze({__proto__:null,MUSTACHE_EXPR:Xt,ERB_EXPR:qt,TMPLIT_EXPR:Vt,DATA_ATTR:Kt,ARIA_ATTR:Zt,IS_ALLOWED_URI:ct,IS_SCRIPT_OR_DATA:Qt,ATTR_WHITESPACE:Jt,DOCTYPE_NAME:ft});let en=function(){return typeof window>"u"?null:window},tn=function(a,g){if(typeof a!="object"||typeof a.createPolicy!="function")return null;let d=null,M="data-tt-policy-suffix";g&&g.hasAttribute(M)&&(d=g.getAttribute(M));let j="dompurify"+(d?"#"+d:"");try{return a.createPolicy(j,{createHTML(se){return se},createScriptURL(se){return se}})}catch{return console.warn("TrustedTypes policy "+j+" could not be created."),null}};function mt(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:en(),a=r=>mt(r);if(a.version="3.0.6",a.removed=[],!h||!h.document||h.document.nodeType!==9)return a.isSupported=!1,a;let{document:g}=h,d=g,M=d.currentScript,{DocumentFragment:j,HTMLTemplateElement:se,Node:ve,Element:ut,NodeFilter:Ie,NamedNodeMap:sn=h.NamedNodeMap||h.MozNamedAttrMap,HTMLFormElement:on,DOMParser:rn,trustedTypes:Re}=h,be=ut.prototype,an=W(be,"cloneNode"),ln=W(be,"nextSibling"),cn=W(be,"childNodes"),Me=W(be,"parentNode");if(typeof se=="function"){let r=g.createElement("template");r.content&&r.content.ownerDocument&&(g=r.content.ownerDocument)}let U,ue="",{implementation:Ue,createNodeIterator:fn,createDocumentFragment:pn,getElementsByTagName:mn}=g,{importNode:un}=d,H={};a.isSupported=typeof s=="function"&&typeof Me=="function"&&Ue&&Ue.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:ke,ERB_EXPR:Pe,TMPLIT_EXPR:Fe,DATA_ATTR:dn,ARIA_ATTR:hn,IS_SCRIPT_OR_DATA:gn,ATTR_WHITESPACE:dt}=pt,{IS_ALLOWED_URI:ht}=pt,L=null,gt=c({},[...pe,...I,...ne,...me,...Ae]),D=null,Et=c({},[...at,...Ce,...lt,...ye]),S=Object.seal(m(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,ze=null,Tt=!0,Ge=!0,_t=!1,At=!0,ie=!1,K=!1,He=!1,$e=!1,oe=!1,Se=!1,we=!1,yt=!0,Rt=!1,En="user-content-",Be=!0,he=!1,re={},ae=null,bt=c({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),St=null,wt=c({},["audio","video","img","source","image","track"]),We=null,Lt=c({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Le="http://www.w3.org/1998/Math/MathML",De="http://www.w3.org/2000/svg",Y="http://www.w3.org/1999/xhtml",le=Y,je=!1,Ye=null,Tn=c({},[Le,De,Y],z),Z=null,_n=["application/xhtml+xml","text/html"],An="text/html",x=null,ce=null,yn=g.createElement("form"),Dt=function(e){return e instanceof RegExp||e instanceof Function},Xe=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ce&&ce===e)){if((!e||typeof e!="object")&&(e={}),e=G(e),Z=_n.indexOf(e.PARSER_MEDIA_TYPE)===-1?Z=An:Z=e.PARSER_MEDIA_TYPE,x=Z==="application/xhtml+xml"?z:R,L="ALLOWED_TAGS"in e?c({},e.ALLOWED_TAGS,x):gt,D="ALLOWED_ATTR"in e?c({},e.ALLOWED_ATTR,x):Et,Ye="ALLOWED_NAMESPACES"in e?c({},e.ALLOWED_NAMESPACES,z):Tn,We="ADD_URI_SAFE_ATTR"in e?c(G(Lt),e.ADD_URI_SAFE_ATTR,x):Lt,St="ADD_DATA_URI_TAGS"in e?c(G(wt),e.ADD_DATA_URI_TAGS,x):wt,ae="FORBID_CONTENTS"in e?c({},e.FORBID_CONTENTS,x):bt,de="FORBID_TAGS"in e?c({},e.FORBID_TAGS,x):{},ze="FORBID_ATTR"in e?c({},e.FORBID_ATTR,x):{},re="USE_PROFILES"in e?e.USE_PROFILES:!1,Tt=e.ALLOW_ARIA_ATTR!==!1,Ge=e.ALLOW_DATA_ATTR!==!1,_t=e.ALLOW_UNKNOWN_PROTOCOLS||!1,At=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ie=e.SAFE_FOR_TEMPLATES||!1,K=e.WHOLE_DOCUMENT||!1,oe=e.RETURN_DOM||!1,Se=e.RETURN_DOM_FRAGMENT||!1,we=e.RETURN_TRUSTED_TYPE||!1,$e=e.FORCE_BODY||!1,yt=e.SANITIZE_DOM!==!1,Rt=e.SANITIZE_NAMED_PROPS||!1,Be=e.KEEP_CONTENT!==!1,he=e.IN_PLACE||!1,ht=e.ALLOWED_URI_REGEXP||ct,le=e.NAMESPACE||Y,S=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(S.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(S.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(S.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ie&&(Ge=!1),Se&&(oe=!0),re&&(L=c({},[...Ae]),D=[],re.html===!0&&(c(L,pe),c(D,at)),re.svg===!0&&(c(L,I),c(D,Ce),c(D,ye)),re.svgFilters===!0&&(c(L,ne),c(D,Ce),c(D,ye)),re.mathMl===!0&&(c(L,me),c(D,lt),c(D,ye))),e.ADD_TAGS&&(L===gt&&(L=G(L)),c(L,e.ADD_TAGS,x)),e.ADD_ATTR&&(D===Et&&(D=G(D)),c(D,e.ADD_ATTR,x)),e.ADD_URI_SAFE_ATTR&&c(We,e.ADD_URI_SAFE_ATTR,x),e.FORBID_CONTENTS&&(ae===bt&&(ae=G(ae)),c(ae,e.FORBID_CONTENTS,x)),Be&&(L["#text"]=!0),K&&c(L,["html","head","body"]),L.table&&(c(L,["tbody"]),delete de.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw F('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw F('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=e.TRUSTED_TYPES_POLICY,ue=U.createHTML("")}else U===void 0&&(U=tn(Re,M)),U!==null&&typeof ue=="string"&&(ue=U.createHTML(""));l&&l(e),ce=e}},xt=c({},["mi","mo","mn","ms","mtext"]),Nt=c({},["foreignobject","desc","title","annotation-xml"]),Rn=c({},["title","style","font","a","script"]),xe=c({},I);c(xe,ne),c(xe,_e);let qe=c({},me);c(qe,rt);let bn=function(e){let n=Me(e);(!n||!n.tagName)&&(n={namespaceURI:le,tagName:"template"});let i=R(e.tagName),T=R(n.tagName);return Ye[e.namespaceURI]?e.namespaceURI===De?n.namespaceURI===Y?i==="svg":n.namespaceURI===Le?i==="svg"&&(T==="annotation-xml"||xt[T]):!!xe[i]:e.namespaceURI===Le?n.namespaceURI===Y?i==="math":n.namespaceURI===De?i==="math"&&Nt[T]:!!qe[i]:e.namespaceURI===Y?n.namespaceURI===De&&!Nt[T]||n.namespaceURI===Le&&!xt[T]?!1:!qe[i]&&(Rn[i]||!xe[i]):!!(Z==="application/xhtml+xml"&&Ye[e.namespaceURI]):!1},Q=function(e){E(a.removed,{element:e});try{e.parentNode.removeChild(e)}catch{e.remove()}},Ve=function(e,n){try{E(a.removed,{attribute:n.getAttributeNode(e),from:n})}catch{E(a.removed,{attribute:null,from:n})}if(n.removeAttribute(e),e==="is"&&!D[e])if(oe||Se)try{Q(n)}catch{}else try{n.setAttribute(e,"")}catch{}},Ot=function(e){let n=null,i=null;if($e)e="<remove></remove>"+e;else{let C=ee(e,/^[\r\n\t ]+/);i=C&&C[0]}Z==="application/xhtml+xml"&&le===Y&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");let T=U?U.createHTML(e):e;if(le===Y)try{n=new rn().parseFromString(T,Z)}catch{}if(!n||!n.documentElement){n=Ue.createDocument(le,"template",null);try{n.documentElement.innerHTML=je?ue:T}catch{}}let O=n.body||n.documentElement;return e&&i&&O.insertBefore(g.createTextNode(i),O.childNodes[0]||null),le===Y?mn.call(n,K?"html":"body")[0]:K?n.documentElement:O},Ct=function(e){return fn.call(e.ownerDocument||e,e,Ie.SHOW_ELEMENT|Ie.SHOW_COMMENT|Ie.SHOW_TEXT,null)},Sn=function(e){return e instanceof on&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof sn)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},vt=function(e){return typeof ve=="function"&&e instanceof ve},X=function(e,n,i){H[e]&&y(H[e],T=>{T.call(a,n,i,ce)})},It=function(e){let n=null;if(X("beforeSanitizeElements",e,null),Sn(e))return Q(e),!0;let i=x(e.nodeName);if(X("uponSanitizeElement",e,{tagName:i,allowedTags:L}),e.hasChildNodes()&&!vt(e.firstElementChild)&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return Q(e),!0;if(!L[i]||de[i]){if(!de[i]&&Ut(i)&&(S.tagNameCheck instanceof RegExp&&b(S.tagNameCheck,i)||S.tagNameCheck instanceof Function&&S.tagNameCheck(i)))return!1;if(Be&&!ae[i]){let T=Me(e)||e.parentNode,O=cn(e)||e.childNodes;if(O&&T){let C=O.length;for(let k=C-1;k>=0;--k)T.insertBefore(an(O[k],!0),ln(e))}}return Q(e),!0}return e instanceof ut&&!bn(e)||(i==="noscript"||i==="noembed"||i==="noframes")&&b(/<\/no(script|embed|frames)/i,e.innerHTML)?(Q(e),!0):(ie&&e.nodeType===3&&(n=e.textContent,y([ke,Pe,Fe],T=>{n=B(n,T," ")}),e.textContent!==n&&(E(a.removed,{element:e.cloneNode()}),e.textContent=n)),X("afterSanitizeElements",e,null),!1)},Mt=function(e,n,i){if(yt&&(n==="id"||n==="name")&&(i in g||i in yn))return!1;if(!(Ge&&!ze[n]&&b(dn,n))){if(!(Tt&&b(hn,n))){if(!D[n]||ze[n]){if(!(Ut(e)&&(S.tagNameCheck instanceof RegExp&&b(S.tagNameCheck,e)||S.tagNameCheck instanceof Function&&S.tagNameCheck(e))&&(S.attributeNameCheck instanceof RegExp&&b(S.attributeNameCheck,n)||S.attributeNameCheck instanceof Function&&S.attributeNameCheck(n))||n==="is"&&S.allowCustomizedBuiltInElements&&(S.tagNameCheck instanceof RegExp&&b(S.tagNameCheck,i)||S.tagNameCheck instanceof Function&&S.tagNameCheck(i))))return!1}else if(!We[n]){if(!b(ht,B(i,dt,""))){if(!((n==="src"||n==="xlink:href"||n==="href")&&e!=="script"&&fe(i,"data:")===0&&St[e])){if(!(_t&&!b(gn,B(i,dt,"")))){if(i)return!1}}}}}}return!0},Ut=function(e){return e.indexOf("-")>0},kt=function(e){X("beforeSanitizeAttributes",e,null);let{attributes:n}=e;if(!n)return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:D},T=n.length;for(;T--;){let O=n[T],{name:C,namespaceURI:k,value:J}=O,ge=x(C),P=C==="value"?J:te(J);if(i.attrName=ge,i.attrValue=P,i.keepAttr=!0,i.forceKeepAttr=void 0,X("uponSanitizeAttribute",e,i),P=i.attrValue,i.forceKeepAttr||(Ve(C,e),!i.keepAttr))continue;if(!At&&b(/\/>/i,P)){Ve(C,e);continue}ie&&y([ke,Pe,Fe],Ft=>{P=B(P,Ft," ")});let Pt=x(e.nodeName);if(Mt(Pt,ge,P)){if(Rt&&(ge==="id"||ge==="name")&&(Ve(C,e),P=En+P),U&&typeof Re=="object"&&typeof Re.getAttributeType=="function"&&!k)switch(Re.getAttributeType(Pt,ge)){case"TrustedHTML":{P=U.createHTML(P);break}case"TrustedScriptURL":{P=U.createScriptURL(P);break}}try{k?e.setAttributeNS(k,C,P):e.setAttribute(C,P),w(a.removed)}catch{}}}X("afterSanitizeAttributes",e,null)},wn=function r(e){let n=null,i=Ct(e);for(X("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)X("uponSanitizeShadowNode",n,null),!It(n)&&(n.content instanceof j&&r(n.content),kt(n));X("afterSanitizeShadowDOM",e,null)};return a.sanitize=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=null,i=null,T=null,O=null;if(je=!r,je&&(r="<!-->"),typeof r!="string"&&!vt(r))if(typeof r.toString=="function"){if(r=r.toString(),typeof r!="string")throw F("dirty is not a string, aborting")}else throw F("toString is not a function");if(!a.isSupported)return r;if(He||Xe(e),a.removed=[],typeof r=="string"&&(he=!1),he){if(r.nodeName){let J=x(r.nodeName);if(!L[J]||de[J])throw F("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof ve)n=Ot("<!---->"),i=n.ownerDocument.importNode(r,!0),i.nodeType===1&&i.nodeName==="BODY"||i.nodeName==="HTML"?n=i:n.appendChild(i);else{if(!oe&&!ie&&!K&&r.indexOf("<")===-1)return U&&we?U.createHTML(r):r;if(n=Ot(r),!n)return oe?null:we?ue:""}n&&$e&&Q(n.firstChild);let C=Ct(he?r:n);for(;T=C.nextNode();)It(T)||(T.content instanceof j&&wn(T.content),kt(T));if(he)return r;if(oe){if(Se)for(O=pn.call(n.ownerDocument);n.firstChild;)O.appendChild(n.firstChild);else O=n;return(D.shadowroot||D.shadowrootmode)&&(O=un.call(d,O,!0)),O}let k=K?n.outerHTML:n.innerHTML;return K&&L["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&b(ft,n.ownerDocument.doctype.name)&&(k="<!DOCTYPE "+n.ownerDocument.doctype.name+`>
`+k),ie&&y([ke,Pe,Fe],J=>{k=B(k,J," ")}),U&&we?U.createHTML(k):k},a.setConfig=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Xe(r),He=!0},a.clearConfig=function(){ce=null,He=!1},a.isValidAttribute=function(r,e,n){ce||Xe({});let i=x(r),T=x(e);return Mt(i,T,n)},a.addHook=function(r,e){typeof e=="function"&&(H[r]=H[r]||[],E(H[r],e))},a.removeHook=function(r){if(H[r])return w(H[r])},a.removeHooks=function(r){H[r]&&(H[r]=[])},a.removeAllHooks=function(){H={}},a}var nn=mt();return nn})});var Qe=In(Gt(),1);var $=s=>Object.prototype.toString.call(s).slice(8,-1),N=s=>typeof s=="string"||s instanceof String;var Je=[7,8,9,10,11,12,13,27,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255];var et=["aaa","aaas","about","acap","acct","acd","acr","adiumxtra","adt","afp","afs","aim","amss","android","appdata","apt","ar","ark","at","attachment","aw","barion","beshare","bitcoin","bitcoincash","blob","bolo","brid","browserext","cabal","calculator","callto","cap","cast","casts","chrome","chrome-extension","cid","coap","coaps","com-eventbrite-attendee","content","content-type","crid","cstr","cvs","dab","dat","data","dav","dhttp","diaspora","dict","did","dis","dlna-playcontainer","dlna-playsingle","dns","dntp","doi","dpp","drm","dtmi","dtn","dvb","dvx","dweb","ed2k","eid","elsi","embedded","ens","ethereum","example","facetime","feed","feedready","fido","file","finger","first-run-pen-experience","fish","fm","ftp","fuchsia-pkg","geo","gg","git","gitoid","gizmoproject","go","gopher","graph","gtalk","h323","ham","hcap","hcp","http","https","hxxp","hxxps","hydrazone","hyper","iax","icap","icon","im","imap","info","iotdisco","ipfs","ipn","ipns","ipp","ipps","irc","irc6","ircs","iris","iris.beep","iris.lwz","iris.xpc","iris.xpcs","isostore","itms","jabber","jar","jms","keyparc","lastfm","lbry","ldap","ldaps","leaptofrogans","lid","lorawan","lpa","lvlt","magnet","mailto","maps","market","matrix","message","microsoft.windows.camera","microsoft.windows.camera.multipicker","microsoft.windows.camera.picker","mid","mms","mongodb","moz","moz-extension","ms-access","ms-appinstaller","ms-browser-extension","ms-calculator","ms-drive-to","ms-enrollment","ms-excel","ms-eyecontrolspeech","ms-gamebarservices","ms-gamingoverlay","ms-getoffice","ms-help","ms-infopath","ms-inputapp","ms-launchremotedesktop","ms-lockscreencomponent-config","ms-media-stream-id","ms-meetnow","ms-mixedrealitycapture","ms-mobileplans","ms-newsandinterests","ms-officeapp","ms-people","ms-powerpoint","ms-project","ms-publisher","ms-remotedesktop","ms-remotedesktop-launch","ms-restoretabcompanion","ms-screenclip","ms-screensketch","ms-search","ms-search-repair","ms-secondary-screen-controller","ms-secondary-screen-setup","ms-settings","ms-settings-airplanemode","ms-settings-bluetooth","ms-settings-camera","ms-settings-cellular","ms-settings-cloudstorage","ms-settings-connectabledevices","ms-settings-displays-topology","ms-settings-emailandaccounts","ms-settings-language","ms-settings-location","ms-settings-lock","ms-settings-nfctransactions","ms-settings-notifications","ms-settings-power","ms-settings-privacy","ms-settings-proximity","ms-settings-screenrotation","ms-settings-wifi","ms-settings-workplace","ms-spd","ms-stickers","ms-sttoverlay","ms-transit-to","ms-useractivityset","ms-virtualtouchpad","ms-visio","ms-walk-to","ms-whiteboard","ms-whiteboard-cmd","ms-word","msnim","msrp","msrps","mss","mt","mtqp","mumble","mupdate","mvn","news","nfs","ni","nih","nntp","notes","num","ocf","oid","onenote","onenote-cmd","opaquelocktoken","openid","openpgp4fpr","otpauth","palm","paparazzi","payment","payto","pkcs11","platform","pop","pres","proxy","psyc","pttp","pwid","qb","query","quic-transport","redis","rediss","reload","res","resource","rmi","rsync","rtmfp","rtmp","rtsp","rtsps","rtspu","sarif","secondlife","secret-token","service","session","sftp","sgn","shc","sieve","simpleledger","simplex","sip","sips","skype","smb","smp","sms","smtp","snmp","soap.beep","soap.beeps","soldat","spiffe","spotify","ssb","ssh","starknet","steam","stun","stuns","submit","svn","swh","swid","swidpath","tag","taler","teamspeak","tel","teliaeid","telnet","tftp","things","thismessage","tip","tn3270","tool","turn","turns","tv","udp","unreal","urn","ut2004","uuid-in-package","v-event","vemmi","ventrilo","ves","view-source","vnc","vscode","vscode-insiders","vsls","w3","wcr","web3","webcal","wifi","ws","wss","wtai","wyciwyg","xcon","xcon-userid","xfire","xmlrpc.beep","xmlrpc.beeps","xmpp","xri","ymsgr","z39.50r","z39.50s"];var{FileReader:Ht}=globalThis;var Ee=16,kn=/^[\w+/\-=]+$/,Pn=/:$/,Fn=/^\d+/,zn=/#x?$/,Gn=/^#(?:x(?:00)?[2-7]|\d)/,Hn=/^x[\dA-F]+/i,$n=/&#(x(?:00)?[\dA-F]{2}|0?\d{1,3});?/gi,Bn=/^[a-z][\da-z+\-.]*$/,Wn=/^(?:ext|web)\+[a-z]+$/,$t=/(?:java|vb)script/,jn=/^%[\dA-F]{2}$/i,Oe=s=>{if(!N(s))throw new TypeError(`Expected String but got ${$(s)}.`);let t=[];for(let o of s)t.push(`%${o.charCodeAt(0).toString(Ee).toUpperCase()}`);return t.join("")},tt=s=>{N(s)&&jn.test(s)&&(s=s.toUpperCase());let[t,o,p,f,l,u]=["&","#","<",">",'"',"'"].map(Oe),m;return s===t?m=`${t}amp;`:s===p?m=`${t}lt;`:s===f?m=`${t}gt;`:s===l?m=`${t}quot;`:s===u?m=`${t}${o}39;`:m=s,m},Bt=s=>{if(N(s)){if(!kn.test(s))throw new Error(`Invalid base64 data: ${s}`)}else throw new TypeError(`Expected String but got ${$(s)}.`);let t=atob(s),o=Uint8Array.from([...t].map(l=>l.charCodeAt(0))),p=new Set(Je),f;return o.every(l=>p.has(l))?f=t.replace(/\s/g,Oe):f=s,f},nt=(s,t=0)=>{if(!N(s))throw new TypeError(`Expected String but got ${$(s)}.`);if(Number.isInteger(t)){if(t>Ee)throw new Error("Character references nested too deeply.")}else throw new TypeError(`Expected Number but got ${$(t)}.`);let o=decodeURIComponent(s);if(/&#/.test(o)){let p=new Set(Je),f=[...o.matchAll($n)].reverse();for(let l of f){let[u,m]=l,A;if(Hn.test(m)?A=parseInt(`0${m}`,Ee):Fn.test(m)&&(A=parseInt(m)),Number.isInteger(A)){let{index:v}=l,[y,w]=[o.substring(0,v),o.substring(v+u.length)];p.has(A)?(o=`${y}${String.fromCharCode(A)}${w}`,(zn.test(y)||Gn.test(w))&&(o=nt(o,++t))):A<Ee*Ee&&(o=`${y}${w}`)}}}return o},Wt=s=>new Promise((t,o)=>{let p=new Ht;p.addEventListener("error",()=>o(p.error)),p.addEventListener("abort",()=>t(p.result)),p.addEventListener("load",()=>t(p.result)),p.readAsDataURL(s)}),Ne=class{#e;constructor(){this.#e=new Set(et)}get(){return[...this.#e]}has(t){return this.#e.has(t)}add(t){if(N(t)){if($t.test(t)||!Bn.test(t))throw new Error(`Invalid scheme: ${t}`)}else throw new TypeError(`Expected String but got ${$(t)}.`);return this.#e.add(t),[...this.#e]}remove(t){return this.#e.delete(t)}verify(t){let o;if(N(t))try{let{protocol:p}=new URL(t),f=p.replace(Pn,""),l=f.split("+");o=!$t.test(f)&&Wn.test(f)||l.every(u=>this.#e.has(u))}catch{o=!1}return!!o}reset(){this.#e.clear();for(let t of et)this.#e.add(t)}};var Yn=16,st=/data:[\w#&+\-./;=]*,/,jt=/data:[\w#&+\-./;=]*base64,[\w+/\-=]+/i,Xn=/data:[\w#&+\-./;=]*,[^"]+/g,Te=/:$/,qn=/(?:#|%23)$/,Vn=/(?<!(?:#|%23).*)(?:\?|%3F)$/,Kn=/[<>"'\s]/g,Zn=/%(?:2(?:2|7)|3(?:C|E))/g,Qn=/^(?:text\/(?:ht|x)ml|application\/(?:[\w#&\-.;]+\+)?xml|image\/svg\+xml)/,it=/(?:java|vb)script|blob/,Yt=/%(?:2(?:2|7)|3(?:C|E))|[<>"']/,Jn=/%26/g,ot=class extends Ne{#e;#t;constructor(){super(),this.#e=0,this.#t=new Set}replace(t){if(!N(t))throw new TypeError(`Expected String but got ${$(t)}.`);let o=t;if(st.test(o)){let f=[...o.matchAll(Xn)].reverse();for(let l of f){let[u]=l;jt.test(u)&&([u]=jt.exec(u)),this.#e++,this.#t.add(u);let m=this.sanitize(u,{allow:["data"]}),{index:A}=l,[v,y]=[o.substring(0,A),o.substring(A+u.length)];m?o=`${v}${m}${y}`:o=`${v}${y}`}}return o}purify(t){if(!N(t))throw new TypeError(`Expected String but got ${$(t)}.`);let o=Qe.default.sanitize(decodeURIComponent(t));return o&&st.test(o)&&(o=this.replace(o)),o=o.replace(qn,"").replace(Vn,""),encodeURI(o)}sanitize(t,o){if(this.#e>Yn)throw this.#e=0,new Error("Data URLs nested too deeply.");let{allow:p,deny:f,only:l,remove:u}=o??{},m=new Map([["blob",!1],["data",!1],["file",!1],["javascrpt",!1],["vbscript",!1]]),A=new Set,v=!1;if(Array.isArray(l)&&l.length){let w=super.get();for(let R of w)m.set(R,!1);let E=Object.values(l);for(let R of E)if(N(R)&&(R=R.trim(),!it.test(R))){if(super.has(R))m.set(R,!0);else{try{super.add(R)}catch{}super.has(R)&&(m.set(R,!0),A.add(R))}!v&&m.has(R)&&(v=m.get(R))}}else{if(Array.isArray(p)&&p.length){let w=Object.values(p);for(let E of w)if(N(E)&&(E=E.trim(),!it.test(E)))if(super.has(E))m.set(E,!0);else{try{super.add(E)}catch{}super.has(E)&&(m.set(E,!0),A.add(E))}}if(Array.isArray(f)&&f.length){let w=Object.values(f);for(let E of w)N(E)&&(E=E.trim(),E&&m.set(E,!1))}}let y;if(super.verify(t)){let{hash:w,href:E,pathname:R,protocol:z,search:ee}=new URL(t),B=z.replace(Te,""),fe=B.split("+"),te;if(v)te=fe.every(b=>m.get(b));else for(let[b,F]of m.entries())if(te=F||B!==b&&fe.every(_=>_!==b),!te)break;if(te){let b=fe.includes("data"),F,_=E;if(b){let[V,...c]=R.split(","),G=`${c.join(",")}${ee}${w}`,W=V.split(";"),pe=W[W.length-1]==="base64",I=G;pe&&(I=Bt(G));try{let _e=nt(I).trim(),{protocol:me}=new URL(_e);me.replace(Te,"").split("+").some(Ae=>it.test(Ae))&&(_="")}catch{}let ne=st.test(I);I!==G||ne?ne?I=this.replace(I):this.#t.has(t)?this.#t.delete(t):F=!0:this.#t.has(t)?this.#t.delete(t):F=!0,(!V||Qn.test(V))&&(I=this.purify(I)),_&&I?(pe&&I!==G&&W.pop(),_=`${B}:${W.join(";")},${I}`):_=""}else F=!0;if(!b&&u&&Yt.test(_)){let V=Yt.exec(_),{index:c}=V;_=_.substring(0,c)}_?(y=_.replace(Kn,Oe).replace(Jn,tt),F&&(b||(y=y.replace(Zn,tt)),this.#e=0)):this.#e=0}A.size&&A.forEach(b=>{super.remove(b)})}return y||null}parse(t,o){if(!N(t))throw new TypeError(`Expected String but got ${$(t)}.`);let p=new Map([["input",t]]),f;if(this.verify(t)){let{protocol:l}=new URL(t);l==="blob:"?f=t:f=this.sanitize(t,o??{allow:["data","file"]})}if(f){let l=new URL(f),{pathname:u,protocol:m}=l,v=m.replace(Te,"").split("+").includes("data");if(p.set("valid",!0),v){let y=new Map,[w,...E]=u.split(","),R=`${E.join(",")}`,z=w.split(";"),ee=z[z.length-1]==="base64";ee&&z.pop(),y.set("mime",z.join(";")),y.set("base64",ee),y.set("data",R),p.set("data",Object.fromEntries(y))}else p.set("data",null);for(let y in l){let w=l[y];N(w)&&p.set(y,w)}}else p.set("valid",!1);return Object.fromEntries(p)}reset(){super.reset(),this.#e=0,this.#t.clear()}},q=new ot,es=async(s,t={allow:[],deny:[],only:[]})=>{let o;if(s&&N(s)){let p;try{let{protocol:f}=new URL(s);p=f.replace(Te,"")}catch{}if(p==="blob"){let{allow:f,deny:l,only:u}=t;if(Array.isArray(f)&&f.includes("blob")&&!(Array.isArray(l)&&l.includes("blob"))||Array.isArray(u)&&u.includes("blob")){let m;try{m=await fetch(s).then(A=>A.blob()).then(Wt)}catch{}if(m){if(Array.isArray(u))u.includes("data")||u.push("data");else if(Array.isArray(f)&&(f.includes("data")||f.push("data"),Array.isArray(l)&&l.includes("data"))){let A=l.indexOf("data");l.splice(A,1)}o=q.sanitize(m,t)}}URL.revokeObjectURL(s)}else p&&(o=q.sanitize(s,t))}return o||null},ts=(s,t)=>{let o;if(s&&N(s)){let p;try{let{protocol:f}=new URL(s);p=f.replace(Te,"")}catch{}p==="blob"?URL.revokeObjectURL(s):p&&(o=q.sanitize(s,t))}return o||null},ns=async s=>q.parse(s),ss=s=>q.parse(s),is=async s=>q.verify(s),os=s=>q.verify(s);export{q as default,is as isURI,os as isURISync,ns as parseURL,ss as parseURLSync,es as sanitizeURL,ts as sanitizeURLSync};
/*!
 * URL Sanitizer
 *
 * @license MIT
 * @copyright asamuzaK (Kazz)
 * @see {@link https://github.com/asamuzaK/urlSanitizer/blob/main/LICENSE}
 */
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE *)
*/
//# sourceMappingURL=url-sanitizer.min.js.map
